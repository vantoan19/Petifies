version: '3'

services:
  mobile-api-gateway:
    build: 
      context: ../
      dockerfile: ./server/services/mobile-api-gateway/Dockerfile
    restart: always
    volumes:
      - ../build/server/mobileApiGateway:/app/mobileApiGateway
    ports:
      - "443:8888"
    deploy:
      mode: replicated
      replicas: 1
    environment:
      - SERVER_MODE=development

  auth-service:
    build:
      context: ../
      dockerfile: ./server/services/user-services/auth-service/Dockerfile
    restart: always
    volumes:
      - ../build/server/authService:/app/authService
    ports: 
      - "80:8888"
    deploy:
      mode: replicated
      replicas: 1
    environment:
      - SERVER_MODE=development